---
import Layout from '../layouts/Layout.astro';
import { practices } from '../data/practices';
import fs from 'node:fs';
import path from 'node:path';

const areas = fs.readFileSync(
  path.join(process.cwd(), 'agra-places.txt'),
  'utf-8'
).split('\n').filter(Boolean);
---

<Layout title="Delhi Astro Connect">
  <main>
    <!-- Top Ad Section -->
    <section class="py-8 bg-gray-50">
      <div class="container mx-auto px-4">
        <div class="w-full max-w-[728px] h-[90px] mx-auto">
          <div id="top-leaderboard-ad" class="w-full h-full flex items-center justify-center bg-gray-100" data-ad-slot="top-leaderboard" data-ad-format="auto" data-full-width-responsive="true">
            <!-- Ad will be inserted here by Mediavine/AdSense -->
          </div>
        </div>
      </div>
    </section>

    <!-- Practices Section -->
    <section id="practices" class="py-20 bg-gray-50">
      <div class="container mx-auto px-4">
        <div class="text-center max-w-2xl mx-auto mb-16">
          <h2 class="text-4xl font-display font-bold text-gray-900 mb-4">Astrological Practices</h2>
          <p class="text-gray-600">Explore different types of astrological services available in Agra</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-7xl mx-auto">
          {practices.map(practice => (
            <div class="card group hover:scale-105 transition-transform duration-300">
              <div class="p-8">
                <div class="flex items-center mb-4">
                  <span class="text-4xl mr-4 group-hover:scale-110 transition-transform duration-300">{practice.icon}</span>
                  <h3 class="text-xl font-bold text-gray-900">{practice.name}</h3>
                </div>
                <p class="text-gray-600 mb-6">{practice.description}</p>
                <a 
                  href={`/practices/${practice.slug}`}
                  class="btn-secondary w-full justify-center"
                >
                  Find Experts
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" />
                  </svg>
                </a>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- Areas Section -->
    <section id="areas" class="py-20">
      <div class="container mx-auto px-4">
        <div class="text-center max-w-2xl mx-auto mb-16">
          <h2 class="text-4xl font-display font-bold text-gray-900 mb-4">Find by Area</h2>
          <p class="text-gray-600">Discover astrologers in your neighborhood</p>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 max-w-7xl mx-auto">
          {areas.map(area => (
            <a 
              href={`/areas/${area.toLowerCase().replace(/\s+/g, '-').replace(/[^\w\-]+/g, '').replace(/\-+$/, '')}`}
              class="card p-4 text-center hover:bg-indigo-50 transition-colors duration-200"
            >
              <h3 class="text-lg font-medium text-gray-900">{area}</h3>
            </a>
          ))}
        </div>
      </div>
    </section>

   <!-- Bottom Ad Space -->
<section class="py-16 bg-gray-50">
  <div class="container mx-auto px-4">
    <div class="w-full max-w-[728px] h-[90px] mx-auto">
      <div 
        id="bottom-leaderboard-ad" 
        class="w-full h-full flex items-center justify-center bg-gray-100" 
        data-ad-slot="bottom-leaderboard"
        data-ad-format="auto"
        data-full-width-responsive="true"
      >
        <!-- Ad will be inserted here by Mediavine/AdSense -->
      </div>
    </div>
  </div>
</section>
  </main>
</Layout>
